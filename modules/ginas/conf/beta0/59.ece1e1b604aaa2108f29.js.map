{"version":3,"sources":["./src/app/core/substance-details/substance-subunits/substance-subunits.module.ts","./src/app/core/substance-details/substance-subunits/substance-subunits.component.ts","./src/app/core/substance-details/substance-subunits/substance-subunits.component.ts.pre-build-optimizer.js","./src/app/core/substance-details/substance-subunits/substance-subunits.component.ngfactory.js.pre-build-optimizer.js","./src/app/core/substance-details/substance-subunits/substance-subunits.component.scss.shim.ngstyle.js.pre-build-optimizer.js","./src/app/core/substance-details/substance-subunits/substance-subunits.component.html","./src/app/core/substance-details/substance-subunits/substance-subunits.module.ngfactory.js.pre-build-optimizer.js"],"names":["cvService","gaService","subunits","subunitSequences","vocabulary","view","substanceUpdated","Subject","cvType","_this","ngOnInit","this","substance","protein","length","countUpdate","emit","substanceType","getVocabularies","uuid","nucleicAcid","ngAfterViewInit","subscribe","getDomainVocabulary","response","dictionary","processSubunits","error","forEach","subunit","subunitSequence","fullSequence","sequence","subunitIndex","sequencesSectionGroups","push","addSequenceSectionsGroup","squenceString","indexStart","sequenceSectionGroup","sequenceSections","sequenceSectionString","substr","addSequenceSections","sectionGroup","sectionNumberAddend","index","indexEnd","sequenceSection","sectionNumber","sectionUnits","sequenceUnit","unitIndex","unitValue","toUpperCase","class","getTooltipMessage","vocabDisplay","display","updateView","event","sendEvent","analyticsEventCategory","value","RenderType_SubstanceSubunitsComponent","encapsulation","styles","data","View_SubstanceSubunitsComponent_4","_l","ad","_v","show","en","_handleKeydown","$event","_handleTouchend","klass","ngClass","message","View_SubstanceSubunitsComponent_3","View_SubstanceSubunitsComponent_2","View_SubstanceSubunitsComponent_1","onClick","button","ctrlKey","metaKey","shiftKey","queryParams","routerLink","View_SubstanceSubunitsComponent_5","View_SubstanceSubunitsComponent_0","focus","View_SubstanceSubunitsComponent_Host_0","_ck","SubstanceSubunitsComponentNgFactory","SubstanceSubunitsModuleNgFactory"],"mappings":"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","file":"59.ece1e1b604aaa2108f29.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { SubstanceSubunitsComponent } from './substance-subunits.component';\r\nimport { DynamicComponentLoaderModule } from '../../dynamic-component-loader/dynamic-component-loader.module';\r\nimport { MatTooltipModule } from '@angular/material/tooltip';\r\nimport { MatButtonToggleModule } from '@angular/material/button-toggle';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport {RouterModule} from '@angular/router';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    DynamicComponentLoaderModule.forChild(SubstanceSubunitsComponent),\r\n    MatTooltipModule,\r\n    MatButtonToggleModule,\r\n    MatIconModule,\r\n    RouterModule\r\n  ],\r\n  declarations: [SubstanceSubunitsComponent]\r\n})\r\nexport class SubstanceSubunitsModule { }\r\n","import {AfterViewInit, Component, OnInit} from '@angular/core';\r\nimport { SubstanceCardBase } from '../substance-card-base';\r\nimport {SubstanceDetail, Subunit} from '../../substance/substance.model';\r\nimport { ControlledVocabularyService } from '../../controlled-vocabulary/controlled-vocabulary.service';\r\nimport { VocabularyTerm } from '../../controlled-vocabulary/vocabulary.model';\r\nimport { GoogleAnalyticsService } from '../../google-analytics/google-analytics.service';\r\nimport {Subject} from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-substance-subunits',\r\n  templateUrl: './substance-subunits.component.html',\r\n  styleUrls: ['./substance-subunits.component.scss']\r\n})\r\nexport class SubstanceSubunitsComponent extends SubstanceCardBase implements OnInit, AfterViewInit {\r\n  subunits: Array<Subunit> = [];\r\n  subunitSequences: Array<SubunitSequence> = [];\r\n  vocabulary: { [vocabularyTermValue: string]: VocabularyTerm } = {};\r\n  view = 'details';\r\n  substanceUpdated = new Subject<SubstanceDetail>();\r\n  cvType = 'AMINO_ACID_RESIDUE';\r\n  uuid: string;\r\n  substanceType: string;\r\n\r\n\r\n  constructor(\r\n    private cvService: ControlledVocabularyService,\r\n    public gaService: GoogleAnalyticsService\r\n  ) {\r\n    super();\r\n  }\r\n\r\n  ngOnInit() {\r\n      if (this.substance != null\r\n        && this.substance.protein != null\r\n        && this.substance.protein.subunits != null\r\n        && this.substance.protein.subunits.length) {\r\n        this.subunits = this.substance.protein.subunits;\r\n        this.countUpdate.emit(this.subunits.length);\r\n        this.cvType = 'AMINO_ACID_RESIDUE';\r\n        this.substanceType = 'protein';\r\n        this.getVocabularies();\r\n        this.uuid = this.substance.uuid;\r\n      } else if (this.substance != null\r\n        && this.substance.nucleicAcid != null\r\n        && this.substance.nucleicAcid.subunits != null\r\n        && this.substance.nucleicAcid.subunits.length) {\r\n        this.subunits = this.substance.nucleicAcid.subunits;\r\n        this.countUpdate.emit(this.subunits.length);\r\n        this.cvType = 'NUCLEIC_ACID_BASE';\r\n        this.substanceType = 'nucleicAcid';\r\n        this.getVocabularies();\r\n        this.uuid = this.substance.uuid;\r\n      }\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.substanceUpdated.subscribe(substance => {\r\n      this.substance = substance;\r\n      this.uuid = this.substance.uuid;\r\n      if (this.substance.protein) {\r\n          this.subunits = this.substance.protein.subunits;\r\n      } else if (this.substance.nucleicAcid) {\r\n          this.subunits = this.substance.nucleicAcid.subunits;\r\n      }\r\n      this.countUpdate.emit(this.subunits.length);\r\n    });\r\n  }\r\n\r\n  getVocabularies(): void {\r\n    this.cvService.getDomainVocabulary(this.cvType).subscribe(response => {\r\n      this.vocabulary = response[this.cvType].dictionary;\r\n      this.processSubunits();\r\n    }, error => {\r\n      this.processSubunits();\r\n    });\r\n  }\r\n\r\n  private processSubunits(): void {\r\n    this.subunits.forEach(subunit => {\r\n      const subunitSequence: SubunitSequence = {\r\n        fullSequence: subunit.sequence,\r\n        subunitIndex: subunit.subunitIndex,\r\n        uuid: subunit.uuid,\r\n        sequencesSectionGroups: []\r\n      };\r\n      this.subunitSequences.push(subunitSequence);\r\n      this.addSequenceSectionsGroup(subunitSequence, subunit.sequence);\r\n    });\r\n  }\r\n\r\n  private addSequenceSectionsGroup(subunitSequence: SubunitSequence, squenceString: string = '', indexStart: number = 0) {\r\n    const sequenceSectionLength = 50;\r\n    if (squenceString.length > (indexStart + 1)) {\r\n      const sequenceSectionGroup: SequenceSectionGroup = {\r\n        sequenceSections: []\r\n      };\r\n      subunitSequence.sequencesSectionGroups.push(sequenceSectionGroup);\r\n      const sequenceSectionString = squenceString.substr(indexStart, sequenceSectionLength);\r\n\r\n      this.addSequenceSections(sequenceSectionGroup, sequenceSectionString, indexStart);\r\n\r\n      if (sequenceSectionString.length === sequenceSectionLength) {\r\n        indexStart = indexStart + sequenceSectionLength;\r\n        this.addSequenceSectionsGroup(subunitSequence, squenceString, indexStart);\r\n      }\r\n    }\r\n  }\r\n\r\n  private addSequenceSections(\r\n    sectionGroup: SequenceSectionGroup,\r\n    sequenceSectionString: string = '',\r\n    sectionNumberAddend: number,\r\n    index: number = 0,\r\n    indexEnd: number = 9) {\r\n    const indexIncrement = 10;\r\n\r\n    if (sequenceSectionString !== '') {\r\n\r\n      const sequenceSection: SequenceSection = {\r\n        sectionNumber: 0,\r\n        sectionUnits: []\r\n      };\r\n\r\n      while (index <= indexEnd) {\r\n        if (sequenceSectionString[index]) {\r\n          const sequenceUnit: SequenceUnit = {\r\n            unitIndex: index + sectionNumberAddend + 1,\r\n            unitValue: sequenceSectionString[index]\r\n          };\r\n          if (!this.vocabulary[sequenceUnit.unitValue.toUpperCase()]) {\r\n              sequenceUnit.class = 'error';\r\n          }\r\n          sequenceSection.sectionUnits.push(sequenceUnit);\r\n          index++;\r\n        } else {\r\n          break;\r\n        }\r\n      }\r\n\r\n      sequenceSection.sectionNumber = index + sectionNumberAddend;\r\n\r\n      sectionGroup.sequenceSections.push(sequenceSection);\r\n\r\n      if (sequenceSectionString.length > index) {\r\n        indexEnd = indexEnd + indexIncrement;\r\n        this.addSequenceSections(sectionGroup, sequenceSectionString, sectionNumberAddend, index, indexEnd);\r\n      }\r\n    }\r\n  }\r\n\r\n  getTooltipMessage(subunitIndex: number, unitIndex: number, unitValue: string): string {\r\n    let vocabDisplay = '';\r\n    if (this.vocabulary[unitValue.toUpperCase()]) {\r\n      vocabDisplay = this.vocabulary[unitValue.toUpperCase()].display;\r\n    } else {\r\n      vocabDisplay = 'UNDEFINED';\r\n    }\r\n    return `${subunitIndex} - ${unitIndex}: ${unitValue.toUpperCase()} (${vocabDisplay})`;\r\n  }\r\n\r\n  updateView(event): void {\r\n    this.gaService.sendEvent(this.analyticsEventCategory, 'button:view-update', event.value);\r\n    this.view = event.value;\r\n  }\r\n}\r\n\r\ninterface SubunitSequence {\r\n  subunitIndex: number;\r\n  fullSequence?: string;\r\n  uuid?: string;\r\n  sequencesSectionGroups: Array<SequenceSectionGroup>;\r\n}\r\n\r\ninterface SequenceSectionGroup {\r\n  sequenceSections: Array<SequenceSection>;\r\n}\r\n\r\ninterface SequenceSection {\r\n  sectionNumber: number;\r\n  sectionUnits: Array<SequenceUnit>;\r\n}\r\n\r\ninterface SequenceUnit {\r\n  unitIndex: number;\r\n  unitValue: string;\r\n  class?: string;\r\n}\r\n","import * as tslib_1 from \"tslib\";\nimport { AfterViewInit, OnInit } from '@angular/core';\nimport { SubstanceCardBase } from '../substance-card-base';\nimport { ControlledVocabularyService } from '../../controlled-vocabulary/controlled-vocabulary.service';\nimport { GoogleAnalyticsService } from '../../google-analytics/google-analytics.service';\nimport { Subject } from 'rxjs';\nvar SubstanceSubunitsComponent = /** @class */ (function (_super) {\n    tslib_1.__extends(SubstanceSubunitsComponent, _super);\n    function SubstanceSubunitsComponent(cvService, gaService) {\n        var _this = _super.call(this) || this;\n        _this.cvService = cvService;\n        _this.gaService = gaService;\n        _this.subunits = [];\n        _this.subunitSequences = [];\n        _this.vocabulary = {};\n        _this.view = 'details';\n        _this.substanceUpdated = new Subject();\n        _this.cvType = 'AMINO_ACID_RESIDUE';\n        return _this;\n    }\n    SubstanceSubunitsComponent.prototype.ngOnInit = function () {\n        if (this.substance != null\n            && this.substance.protein != null\n            && this.substance.protein.subunits != null\n            && this.substance.protein.subunits.length) {\n            this.subunits = this.substance.protein.subunits;\n            this.countUpdate.emit(this.subunits.length);\n            this.cvType = 'AMINO_ACID_RESIDUE';\n            this.substanceType = 'protein';\n            this.getVocabularies();\n            this.uuid = this.substance.uuid;\n        }\n        else if (this.substance != null\n            && this.substance.nucleicAcid != null\n            && this.substance.nucleicAcid.subunits != null\n            && this.substance.nucleicAcid.subunits.length) {\n            this.subunits = this.substance.nucleicAcid.subunits;\n            this.countUpdate.emit(this.subunits.length);\n            this.cvType = 'NUCLEIC_ACID_BASE';\n            this.substanceType = 'nucleicAcid';\n            this.getVocabularies();\n            this.uuid = this.substance.uuid;\n        }\n    };\n    SubstanceSubunitsComponent.prototype.ngAfterViewInit = function () {\n        var _this = this;\n        this.substanceUpdated.subscribe(function (substance) {\n            _this.substance = substance;\n            _this.uuid = _this.substance.uuid;\n            if (_this.substance.protein) {\n                _this.subunits = _this.substance.protein.subunits;\n            }\n            else if (_this.substance.nucleicAcid) {\n                _this.subunits = _this.substance.nucleicAcid.subunits;\n            }\n            _this.countUpdate.emit(_this.subunits.length);\n        });\n    };\n    SubstanceSubunitsComponent.prototype.getVocabularies = function () {\n        var _this = this;\n        this.cvService.getDomainVocabulary(this.cvType).subscribe(function (response) {\n            _this.vocabulary = response[_this.cvType].dictionary;\n            _this.processSubunits();\n        }, function (error) {\n            _this.processSubunits();\n        });\n    };\n    SubstanceSubunitsComponent.prototype.processSubunits = function () {\n        var _this = this;\n        this.subunits.forEach(function (subunit) {\n            var subunitSequence = {\n                fullSequence: subunit.sequence,\n                subunitIndex: subunit.subunitIndex,\n                uuid: subunit.uuid,\n                sequencesSectionGroups: []\n            };\n            _this.subunitSequences.push(subunitSequence);\n            _this.addSequenceSectionsGroup(subunitSequence, subunit.sequence);\n        });\n    };\n    SubstanceSubunitsComponent.prototype.addSequenceSectionsGroup = function (subunitSequence, squenceString, indexStart) {\n        if (squenceString === void 0) { squenceString = ''; }\n        if (indexStart === void 0) { indexStart = 0; }\n        var sequenceSectionLength = 50;\n        if (squenceString.length > (indexStart + 1)) {\n            var sequenceSectionGroup = {\n                sequenceSections: []\n            };\n            subunitSequence.sequencesSectionGroups.push(sequenceSectionGroup);\n            var sequenceSectionString = squenceString.substr(indexStart, sequenceSectionLength);\n            this.addSequenceSections(sequenceSectionGroup, sequenceSectionString, indexStart);\n            if (sequenceSectionString.length === sequenceSectionLength) {\n                indexStart = indexStart + sequenceSectionLength;\n                this.addSequenceSectionsGroup(subunitSequence, squenceString, indexStart);\n            }\n        }\n    };\n    SubstanceSubunitsComponent.prototype.addSequenceSections = function (sectionGroup, sequenceSectionString, sectionNumberAddend, index, indexEnd) {\n        if (sequenceSectionString === void 0) { sequenceSectionString = ''; }\n        if (index === void 0) { index = 0; }\n        if (indexEnd === void 0) { indexEnd = 9; }\n        var indexIncrement = 10;\n        if (sequenceSectionString !== '') {\n            var sequenceSection = {\n                sectionNumber: 0,\n                sectionUnits: []\n            };\n            while (index <= indexEnd) {\n                if (sequenceSectionString[index]) {\n                    var sequenceUnit = {\n                        unitIndex: index + sectionNumberAddend + 1,\n                        unitValue: sequenceSectionString[index]\n                    };\n                    if (!this.vocabulary[sequenceUnit.unitValue.toUpperCase()]) {\n                        sequenceUnit.class = 'error';\n                    }\n                    sequenceSection.sectionUnits.push(sequenceUnit);\n                    index++;\n                }\n                else {\n                    break;\n                }\n            }\n            sequenceSection.sectionNumber = index + sectionNumberAddend;\n            sectionGroup.sequenceSections.push(sequenceSection);\n            if (sequenceSectionString.length > index) {\n                indexEnd = indexEnd + indexIncrement;\n                this.addSequenceSections(sectionGroup, sequenceSectionString, sectionNumberAddend, index, indexEnd);\n            }\n        }\n    };\n    SubstanceSubunitsComponent.prototype.getTooltipMessage = function (subunitIndex, unitIndex, unitValue) {\n        var vocabDisplay = '';\n        if (this.vocabulary[unitValue.toUpperCase()]) {\n            vocabDisplay = this.vocabulary[unitValue.toUpperCase()].display;\n        }\n        else {\n            vocabDisplay = 'UNDEFINED';\n        }\n        return subunitIndex + \" - \" + unitIndex + \": \" + unitValue.toUpperCase() + \" (\" + vocabDisplay + \")\";\n    };\n    SubstanceSubunitsComponent.prototype.updateView = function (event) {\n        this.gaService.sendEvent(this.analyticsEventCategory, 'button:view-update', event.value);\n        this.view = event.value;\n    };\n    return SubstanceSubunitsComponent;\n}(SubstanceCardBase));\nexport { SubstanceSubunitsComponent };\n","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */ \nimport * as i0 from \"./substance-subunits.component.scss.shim.ngstyle\";\nimport * as i1 from \"@angular/core\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/material/tooltip\";\nimport * as i4 from \"@angular/cdk/overlay\";\nimport * as i5 from \"@angular/cdk/scrolling\";\nimport * as i6 from \"@angular/cdk/platform\";\nimport * as i7 from \"@angular/cdk/a11y\";\nimport * as i8 from \"@angular/cdk/bidi\";\nimport * as i9 from \"@angular/platform-browser\";\nimport * as i10 from \"@angular/router\";\nimport * as i11 from \"@angular/forms\";\nimport * as i12 from \"@angular/material/button-toggle\";\nimport * as i13 from \"../../../../../node_modules/@angular/material/button-toggle/typings/index.ngfactory\";\nimport * as i14 from \"../../../../../node_modules/@angular/material/icon/typings/index.ngfactory\";\nimport * as i15 from \"@angular/material/icon\";\nimport * as i16 from \"./substance-subunits.component\";\nimport * as i17 from \"../../controlled-vocabulary/controlled-vocabulary.service\";\nimport * as i18 from \"../../google-analytics/google-analytics.service\";\nvar styles_SubstanceSubunitsComponent = [i0.styles];\nvar RenderType_SubstanceSubunitsComponent = i1.ɵcrt({ encapsulation: 0, styles: styles_SubstanceSubunitsComponent, data: {} });\nexport { RenderType_SubstanceSubunitsComponent as RenderType_SubstanceSubunitsComponent };\nfunction View_SubstanceSubunitsComponent_4(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 16777216, null, null, 4, \"span\", [[\"class\", \"section-unit  selectedSite siteref\"]], null, [[null, \"longpress\"], [null, \"keydown\"], [null, \"touchend\"]], function (_v, en, $event) { var ad = true; if ((\"longpress\" === en)) {\n        var pd_0 = (i1.ɵnov(_v, 3).show() !== false);\n        ad = (pd_0 && ad);\n    } if ((\"keydown\" === en)) {\n        var pd_1 = (i1.ɵnov(_v, 3)._handleKeydown($event) !== false);\n        ad = (pd_1 && ad);\n    } if ((\"touchend\" === en)) {\n        var pd_2 = (i1.ɵnov(_v, 3)._handleTouchend() !== false);\n        ad = (pd_2 && ad);\n    } return ad; }, null, null)), i1.ɵprd(512, null, i2.ɵNgClassImpl, i2.ɵNgClassR2Impl, [i1.IterableDiffers, i1.KeyValueDiffers, i1.ElementRef, i1.Renderer2]), i1.ɵdid(2, 278528, null, 0, i2.NgClass, [i2.ɵNgClassImpl], { klass: [0, \"klass\"], ngClass: [1, \"ngClass\"] }, null), i1.ɵdid(3, 212992, null, 0, i3.MatTooltip, [i4.Overlay, i1.ElementRef, i5.ScrollDispatcher, i1.ViewContainerRef, i1.NgZone, i6.Platform, i7.AriaDescriber, i7.FocusMonitor, i3.MAT_TOOLTIP_SCROLL_STRATEGY, [2, i8.Directionality], [2, i3.MAT_TOOLTIP_DEFAULT_OPTIONS], [2, i9.HAMMER_LOADER]], { message: [0, \"message\"] }, null), (_l()(), i1.ɵted(4, null, [\" \", \" \"])), (_l()(), i1.ɵand(0, null, null, 0))], function (_ck, _v) { var _co = _v.component; var currVal_0 = \"section-unit  selectedSite siteref\"; var currVal_1 = (_v.context.$implicit.class ? \"error\" : \"\"); _ck(_v, 2, 0, currVal_0, currVal_1); var currVal_2 = _co.getTooltipMessage(_v.parent.parent.parent.context.$implicit.subunitIndex, _v.context.$implicit.unitIndex, _v.context.$implicit.unitValue); _ck(_v, 3, 0, currVal_2); }, function (_ck, _v) { var currVal_3 = _v.context.$implicit.unitValue; _ck(_v, 4, 0, currVal_3); }); }\nfunction View_SubstanceSubunitsComponent_3(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 7, \"div\", [[\"class\", \"sequence-section\"]], null, null, null, null, null)), i1.ɵprd(512, null, i2.ɵNgClassImpl, i2.ɵNgClassR2Impl, [i1.IterableDiffers, i1.KeyValueDiffers, i1.ElementRef, i1.Renderer2]), i1.ɵdid(2, 278528, null, 0, i2.NgClass, [i2.ɵNgClassImpl], { klass: [0, \"klass\"], ngClass: [1, \"ngClass\"] }, null), (_l()(), i1.ɵeld(3, 0, null, null, 1, \"div\", [[\"class\", \"section-number\"]], null, null, null, null, null)), (_l()(), i1.ɵted(4, null, [\"\", \"\"])), (_l()(), i1.ɵeld(5, 0, null, null, 2, \"div\", [[\"class\", \"section-units-container\"]], null, null, null, null, null)), (_l()(), i1.ɵand(16777216, null, null, 1, null, View_SubstanceSubunitsComponent_4)), i1.ɵdid(7, 278528, null, 0, i2.NgForOf, [i1.ViewContainerRef, i1.TemplateRef, i1.IterableDiffers], { ngForOf: [0, \"ngForOf\"] }, null)], function (_ck, _v) { var currVal_0 = \"sequence-section\"; var currVal_1 = ((_v.parent.context.last && _v.context.last) ? \"last-section\" : \"\"); _ck(_v, 2, 0, currVal_0, currVal_1); var currVal_3 = _v.context.$implicit.sectionUnits; _ck(_v, 7, 0, currVal_3); }, function (_ck, _v) { var currVal_2 = _v.context.$implicit.sectionNumber; _ck(_v, 4, 0, currVal_2); }); }\nfunction View_SubstanceSubunitsComponent_2(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 2, \"div\", [[\"class\", \"sequence-section-group\"]], null, null, null, null, null)), (_l()(), i1.ɵand(16777216, null, null, 1, null, View_SubstanceSubunitsComponent_3)), i1.ɵdid(2, 278528, null, 0, i2.NgForOf, [i1.ViewContainerRef, i1.TemplateRef, i1.IterableDiffers], { ngForOf: [0, \"ngForOf\"] }, null)], function (_ck, _v) { var currVal_0 = _v.context.$implicit.sequenceSections; _ck(_v, 2, 0, currVal_0); }, null); }\nfunction View_SubstanceSubunitsComponent_1(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 13, \"div\", [[\"class\", \"subunit-sequence\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(1, 0, null, null, 8, \"div\", [[\"class\", \"form-row subunit-row\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(2, 0, null, null, 1, \"div\", [[\"class\", \"subunit-label\"]], null, null, null, null, null)), (_l()(), i1.ɵted(3, null, [\" Subunit \", \"\"])), (_l()(), i1.ɵeld(4, 0, null, null, 5, \"div\", [], null, null, null, null, null)), (_l()(), i1.ɵeld(5, 0, null, null, 4, \"a\", [[\"class\", \"subunit-title\"]], [[1, \"target\", 0], [8, \"href\", 4]], [[null, \"click\"]], function (_v, en, $event) { var ad = true; if ((\"click\" === en)) {\n        var pd_0 = (i1.ɵnov(_v, 6).onClick($event.button, $event.ctrlKey, $event.metaKey, $event.shiftKey) !== false);\n        ad = (pd_0 && ad);\n    } return ad; }, null, null)), i1.ɵdid(6, 671744, null, 0, i10.RouterLinkWithHref, [i10.Router, i10.ActivatedRoute, i2.LocationStrategy], { queryParams: [0, \"queryParams\"], routerLink: [1, \"routerLink\"] }, null), i1.ɵpod(7, { substance: 0, subunit: 1, seq_type: 2 }), i1.ɵpad(8, 1), (_l()(), i1.ɵted(-1, null, [\"similarity search\"])), (_l()(), i1.ɵeld(10, 0, null, null, 3, \"div\", [[\"class\", \"subunit-sequence\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(11, 0, null, null, 2, \"div\", [[\"class\", \"responsive\"]], null, null, null, null, null)), (_l()(), i1.ɵand(16777216, null, null, 1, null, View_SubstanceSubunitsComponent_2)), i1.ɵdid(13, 278528, null, 0, i2.NgForOf, [i1.ViewContainerRef, i1.TemplateRef, i1.IterableDiffers], { ngForOf: [0, \"ngForOf\"] }, null)], function (_ck, _v) { var _co = _v.component; var currVal_3 = _ck(_v, 7, 0, _co.uuid, _v.context.$implicit.uuid, _co.substanceType); var currVal_4 = _ck(_v, 8, 0, \"/sequence-search\"); _ck(_v, 6, 0, currVal_3, currVal_4); var currVal_5 = _v.context.$implicit.sequencesSectionGroups; _ck(_v, 13, 0, currVal_5); }, function (_ck, _v) { var currVal_0 = _v.context.$implicit.subunitIndex; _ck(_v, 3, 0, currVal_0); var currVal_1 = i1.ɵnov(_v, 6).target; var currVal_2 = i1.ɵnov(_v, 6).href; _ck(_v, 5, 0, currVal_1, currVal_2); }); }\nfunction View_SubstanceSubunitsComponent_5(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 4, \"div\", [[\"class\", \"subunit\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(1, 0, null, null, 1, \"h4\", [], null, null, null, null, null)), (_l()(), i1.ɵted(2, null, [\"Subunit \", \"\"])), (_l()(), i1.ɵeld(3, 0, null, null, 1, \"div\", [[\"class\", \"raw-sequence\"]], null, null, null, null, null)), (_l()(), i1.ɵted(4, null, [\"\", \"\"]))], null, function (_ck, _v) { var currVal_0 = _v.context.$implicit.subunitIndex; _ck(_v, 2, 0, currVal_0); var currVal_1 = _v.context.$implicit.sequence; _ck(_v, 4, 0, currVal_1); }); }\nexport function View_SubstanceSubunitsComponent_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 13, \"div\", [[\"class\", \"filters-container\"]], null, null, null, null, null)), (_l()(), i1.ɵeld(1, 0, null, null, 12, \"mat-button-toggle-group\", [[\"class\", \"mat-button-toggle-group\"], [\"role\", \"group\"]], [[1, \"aria-disabled\", 0], [2, \"mat-button-toggle-vertical\", null], [2, \"mat-button-toggle-group-appearance-standard\", null]], [[null, \"change\"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if ((\"change\" === en)) {\n        var pd_0 = (_co.updateView($event) !== false);\n        ad = (pd_0 && ad);\n    } return ad; }, null, null)), i1.ɵprd(5120, null, i11.NG_VALUE_ACCESSOR, function (p0_0) { return [p0_0]; }, [i12.MatButtonToggleGroup]), i1.ɵprd(6144, null, i12.MatButtonToggleGroupMultiple, null, [i12.MatButtonToggleGroup]), i1.ɵdid(4, 1130496, null, 1, i12.MatButtonToggleGroup, [i1.ChangeDetectorRef, [2, i12.MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS]], { value: [0, \"value\"] }, { change: \"change\" }), i1.ɵqud(603979776, 1, { _buttonToggles: 1 }), (_l()(), i1.ɵeld(6, 0, null, null, 3, \"mat-button-toggle\", [[\"class\", \"mat-button-toggle\"], [\"value\", \"details\"]], [[2, \"mat-button-toggle-standalone\", null], [2, \"mat-button-toggle-checked\", null], [2, \"mat-button-toggle-disabled\", null], [2, \"mat-button-toggle-appearance-standard\", null], [1, \"tabindex\", 0], [1, \"id\", 0], [1, \"name\", 0]], [[null, \"focus\"]], function (_v, en, $event) { var ad = true; if ((\"focus\" === en)) {\n        var pd_0 = (i1.ɵnov(_v, 7).focus() !== false);\n        ad = (pd_0 && ad);\n    } return ad; }, i13.View_MatButtonToggle_0, i13.RenderType_MatButtonToggle)), i1.ɵdid(7, 245760, [[1, 4]], 0, i12.MatButtonToggle, [[2, i12.MatButtonToggleGroup], i1.ChangeDetectorRef, i1.ElementRef, i7.FocusMonitor, [8, null], [2, i12.MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS]], { value: [0, \"value\"] }, null), (_l()(), i1.ɵeld(8, 0, null, 0, 1, \"mat-icon\", [[\"class\", \"mat-icon notranslate\"], [\"role\", \"img\"], [\"svgIcon\", \"list\"]], [[2, \"mat-icon-inline\", null], [2, \"mat-icon-no-color\", null]], null, null, i14.View_MatIcon_0, i14.RenderType_MatIcon)), i1.ɵdid(9, 9158656, null, 0, i15.MatIcon, [i1.ElementRef, i15.MatIconRegistry, [8, null], [2, i15.MAT_ICON_LOCATION], [2, i1.ErrorHandler]], { svgIcon: [0, \"svgIcon\"] }, null), (_l()(), i1.ɵeld(10, 0, null, null, 3, \"mat-button-toggle\", [[\"class\", \"mat-button-toggle\"], [\"value\", \"raw\"]], [[2, \"mat-button-toggle-standalone\", null], [2, \"mat-button-toggle-checked\", null], [2, \"mat-button-toggle-disabled\", null], [2, \"mat-button-toggle-appearance-standard\", null], [1, \"tabindex\", 0], [1, \"id\", 0], [1, \"name\", 0]], [[null, \"focus\"]], function (_v, en, $event) { var ad = true; if ((\"focus\" === en)) {\n        var pd_0 = (i1.ɵnov(_v, 11).focus() !== false);\n        ad = (pd_0 && ad);\n    } return ad; }, i13.View_MatButtonToggle_0, i13.RenderType_MatButtonToggle)), i1.ɵdid(11, 245760, [[1, 4]], 0, i12.MatButtonToggle, [[2, i12.MatButtonToggleGroup], i1.ChangeDetectorRef, i1.ElementRef, i7.FocusMonitor, [8, null], [2, i12.MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS]], { value: [0, \"value\"] }, null), (_l()(), i1.ɵeld(12, 0, null, 0, 1, \"mat-icon\", [[\"class\", \"mat-icon notranslate\"], [\"role\", \"img\"], [\"svgIcon\", \"view_stream\"]], [[2, \"mat-icon-inline\", null], [2, \"mat-icon-no-color\", null]], null, null, i14.View_MatIcon_0, i14.RenderType_MatIcon)), i1.ɵdid(13, 9158656, null, 0, i15.MatIcon, [i1.ElementRef, i15.MatIconRegistry, [8, null], [2, i15.MAT_ICON_LOCATION], [2, i1.ErrorHandler]], { svgIcon: [0, \"svgIcon\"] }, null), (_l()(), i1.ɵeld(14, 0, null, null, 6, \"div\", [], null, null, null, null, null)), i1.ɵprd(512, null, i2.ɵNgClassImpl, i2.ɵNgClassR2Impl, [i1.IterableDiffers, i1.KeyValueDiffers, i1.ElementRef, i1.Renderer2]), i1.ɵdid(16, 278528, null, 0, i2.NgClass, [i2.ɵNgClassImpl], { ngClass: [0, \"ngClass\"] }, null), (_l()(), i1.ɵand(16777216, null, null, 1, null, View_SubstanceSubunitsComponent_1)), i1.ɵdid(18, 278528, null, 0, i2.NgForOf, [i1.ViewContainerRef, i1.TemplateRef, i1.IterableDiffers], { ngForOf: [0, \"ngForOf\"] }, null), (_l()(), i1.ɵand(16777216, null, null, 1, null, View_SubstanceSubunitsComponent_5)), i1.ɵdid(20, 278528, null, 0, i2.NgForOf, [i1.ViewContainerRef, i1.TemplateRef, i1.IterableDiffers], { ngForOf: [0, \"ngForOf\"] }, null)], function (_ck, _v) { var _co = _v.component; var currVal_3 = _co.view; _ck(_v, 4, 0, currVal_3); var currVal_11 = \"details\"; _ck(_v, 7, 0, currVal_11); var currVal_14 = \"list\"; _ck(_v, 9, 0, currVal_14); var currVal_22 = \"raw\"; _ck(_v, 11, 0, currVal_22); var currVal_25 = \"view_stream\"; _ck(_v, 13, 0, currVal_25); var currVal_26 = _co.view; _ck(_v, 16, 0, currVal_26); var currVal_27 = _co.subunitSequences; _ck(_v, 18, 0, currVal_27); var currVal_28 = _co.subunits; _ck(_v, 20, 0, currVal_28); }, function (_ck, _v) { var currVal_0 = i1.ɵnov(_v, 4).disabled; var currVal_1 = i1.ɵnov(_v, 4).vertical; var currVal_2 = (i1.ɵnov(_v, 4).appearance === \"standard\"); _ck(_v, 1, 0, currVal_0, currVal_1, currVal_2); var currVal_4 = !i1.ɵnov(_v, 7).buttonToggleGroup; var currVal_5 = i1.ɵnov(_v, 7).checked; var currVal_6 = i1.ɵnov(_v, 7).disabled; var currVal_7 = (i1.ɵnov(_v, 7).appearance === \"standard\"); var currVal_8 = (0 - 1); var currVal_9 = i1.ɵnov(_v, 7).id; var currVal_10 = null; _ck(_v, 6, 0, currVal_4, currVal_5, currVal_6, currVal_7, currVal_8, currVal_9, currVal_10); var currVal_12 = i1.ɵnov(_v, 9).inline; var currVal_13 = (((i1.ɵnov(_v, 9).color !== \"primary\") && (i1.ɵnov(_v, 9).color !== \"accent\")) && (i1.ɵnov(_v, 9).color !== \"warn\")); _ck(_v, 8, 0, currVal_12, currVal_13); var currVal_15 = !i1.ɵnov(_v, 11).buttonToggleGroup; var currVal_16 = i1.ɵnov(_v, 11).checked; var currVal_17 = i1.ɵnov(_v, 11).disabled; var currVal_18 = (i1.ɵnov(_v, 11).appearance === \"standard\"); var currVal_19 = (0 - 1); var currVal_20 = i1.ɵnov(_v, 11).id; var currVal_21 = null; _ck(_v, 10, 0, currVal_15, currVal_16, currVal_17, currVal_18, currVal_19, currVal_20, currVal_21); var currVal_23 = i1.ɵnov(_v, 13).inline; var currVal_24 = (((i1.ɵnov(_v, 13).color !== \"primary\") && (i1.ɵnov(_v, 13).color !== \"accent\")) && (i1.ɵnov(_v, 13).color !== \"warn\")); _ck(_v, 12, 0, currVal_23, currVal_24); }); }\nexport function View_SubstanceSubunitsComponent_Host_0(_l) { return i1.ɵvid(0, [(_l()(), i1.ɵeld(0, 0, null, null, 1, \"app-substance-subunits\", [], null, null, null, View_SubstanceSubunitsComponent_0, RenderType_SubstanceSubunitsComponent)), i1.ɵdid(1, 4308992, null, 0, i16.SubstanceSubunitsComponent, [i17.ControlledVocabularyService, i18.GoogleAnalyticsService], null, null)], function (_ck, _v) { _ck(_v, 1, 0); }, null); }\nvar SubstanceSubunitsComponentNgFactory = i1.ɵccf(\"app-substance-subunits\", i16.SubstanceSubunitsComponent, View_SubstanceSubunitsComponent_Host_0, {}, { countUpdate: \"countUpdate\" }, []);\nexport { SubstanceSubunitsComponentNgFactory as SubstanceSubunitsComponentNgFactory };\n","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */ \nvar styles = [\".filters-container[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}.subunit-title[_ngcontent-%COMP%]{color:#1565c0;text-decoration:none}.subunit-label[_ngcontent-%COMP%]{font-weight:500;font-size:16px}.form-row[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;padding-bottom:5px}.sequence-container[_ngcontent-%COMP%]{padding-top:20px}error[_ngcontent-%COMP%]{color:red}.subunit-row[_ngcontent-%COMP%]{padding-top:10px}.details[_ngcontent-%COMP%]   .subunit[_ngcontent-%COMP%]{display:none}.details[_ngcontent-%COMP%]   .subunit-sequence[_ngcontent-%COMP%], .show[_ngcontent-%COMP%]{display:block}.hide[_ngcontent-%COMP%]{display:none}.raw[_ngcontent-%COMP%]   .subunit[_ngcontent-%COMP%]{display:block}.raw[_ngcontent-%COMP%]   .subunit-sequence[_ngcontent-%COMP%]{display:none}.subunit-sequence[_ngcontent-%COMP%]{margin-bottom:30px}.sequence-section-group[_ngcontent-%COMP%]{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;margin-bottom:10px}.section-number[_ngcontent-%COMP%]{text-align:right;font-size:.8em}.sequence-section[_ngcontent-%COMP%]{-webkit-box-flex:0;-ms-flex-positive:0;flex-grow:0;padding:0 10px;-ms-flex-preferred-size:20%;flex-basis:20%;-ms-flex-negative:0;flex-shrink:0}.section-units-container[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex}.section-units-container[_ngcontent-%COMP%]   .section-unit[_ngcontent-%COMP%]:hover{cursor:default}.subunit[_ngcontent-%COMP%]{padding-top:5px;padding-bottom:20px}.subunit[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid rgba(0,0,0,.12)}.raw-sequence[_ngcontent-%COMP%]{word-break:break-all;line-height:26px}.siteref[_ngcontent-%COMP%]{display:block;width:15.5px!important;text-align:center}.last-section[_ngcontent-%COMP%]{-ms-flex-preferred-size:0!important;flex-basis:0!important}\"];\nexport { styles as styles };\n","<div class=\"filters-container\">\r\n  <mat-button-toggle-group [value]=\"view\" (change)=\"updateView($event)\">\r\n    <mat-button-toggle value=\"details\">\r\n      <mat-icon svgIcon=\"list\"></mat-icon>\r\n    </mat-button-toggle>\r\n    <mat-button-toggle value=\"raw\">\r\n      <mat-icon svgIcon=\"view_stream\"></mat-icon>\r\n    </mat-button-toggle>\r\n  </mat-button-toggle-group>\r\n</div>\r\n<div [ngClass]=\"view\">\r\n  <div class=\"subunit-sequence\" *ngFor=\"let subunitSequence of subunitSequences\">\r\n  <div class = \"form-row subunit-row\">\r\n    <div class = \"subunit-label\"> Subunit {{subunitSequence.subunitIndex}}</div>\r\n    <div>\r\n      <a class = \"subunit-title\" [routerLink]=\"['/sequence-search']\"\r\n         [queryParams]=\"{substance: uuid, subunit: subunitSequence.uuid, seq_type: substanceType}\">similarity search</a>\r\n    </div>\r\n\r\n  </div>\r\n    <div class = \"subunit-sequence\">\r\n    <div class=\"responsive\">\r\n      <div class=\"sequence-section-group\" *ngFor=\"let sequencesSectionGroup of subunitSequence.sequencesSectionGroups;last as last1\">\r\n        <div class=\"sequence-section\" *ngFor=\"let sequencesSectionGroup of sequencesSectionGroup.sequenceSections;last as last2\" class= \"sequence-section\"  [ngClass] = \"last1 && last2? 'last-section' : ''\" >\r\n          <div class=\"section-number\">{{sequencesSectionGroup.sectionNumber}}</div>\r\n          <div class=\"section-units-container\">\r\n            <span class=\"section-unit  selectedSite siteref\" [ngClass] = \"sectionUnit.class? 'error':''\" *ngFor=\"let sectionUnit of sequencesSectionGroup.sectionUnits\" [matTooltip]=\"getTooltipMessage(subunitSequence.subunitIndex, sectionUnit.unitIndex, sectionUnit.unitValue)\">\r\n              {{sectionUnit.unitValue}}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"subunit\" *ngFor=\"let subunit of subunits\">\r\n    <h4>Subunit {{subunit.subunitIndex}}</h4>\r\n    <div class=\"raw-sequence\">{{subunit.sequence}}</div>\r\n  </div>\r\n</div>\r\n","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */ \nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./substance-subunits.module\";\nimport * as i2 from \"../../../../../node_modules/@angular/material/tooltip/typings/index.ngfactory\";\nimport * as i3 from \"../../../../../node_modules/@angular/router/router.ngfactory\";\nimport * as i4 from \"./substance-subunits.component.ngfactory\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/cdk/observers\";\nimport * as i7 from \"@angular/cdk/overlay\";\nimport * as i8 from \"@angular/cdk/bidi\";\nimport * as i9 from \"@angular/material/tooltip\";\nimport * as i10 from \"@angular/platform-browser\";\nimport * as i11 from \"@angular/material/core\";\nimport * as i12 from \"../../dynamic-component-loader/dynamic-component-loader.module\";\nimport * as i13 from \"@angular/cdk/platform\";\nimport * as i14 from \"@angular/cdk/a11y\";\nimport * as i15 from \"@angular/cdk/portal\";\nimport * as i16 from \"@angular/cdk/scrolling\";\nimport * as i17 from \"@angular/material/button-toggle\";\nimport * as i18 from \"@angular/material/icon\";\nimport * as i19 from \"@angular/router\";\nimport * as i20 from \"../../dynamic-component-loader/dynamic-component-manifest\";\nimport * as i21 from \"./substance-subunits.component\";\nvar SubstanceSubunitsModuleNgFactory = i0.ɵcmf(i1.SubstanceSubunitsModule, [], function (_l) { return i0.ɵmod([i0.ɵmpd(512, i0.ComponentFactoryResolver, i0.ɵCodegenComponentFactoryResolver, [[8, [i2.TooltipComponentNgFactory, i3.ɵangular_packages_router_router_lNgFactory, i4.SubstanceSubunitsComponentNgFactory]], [3, i0.ComponentFactoryResolver], i0.NgModuleRef]), i0.ɵmpd(4608, i5.NgLocalization, i5.NgLocaleLocalization, [i0.LOCALE_ID, [2, i5.ɵangular_packages_common_common_a]]), i0.ɵmpd(4608, i6.MutationObserverFactory, i6.MutationObserverFactory, []), i0.ɵmpd(4608, i7.Overlay, i7.Overlay, [i7.ScrollStrategyOptions, i7.OverlayContainer, i0.ComponentFactoryResolver, i7.OverlayPositionBuilder, i7.OverlayKeyboardDispatcher, i0.Injector, i0.NgZone, i5.DOCUMENT, i8.Directionality, [2, i5.Location]]), i0.ɵmpd(5120, i7.ɵc, i7.ɵd, [i7.Overlay]), i0.ɵmpd(5120, i9.MAT_TOOLTIP_SCROLL_STRATEGY, i9.MAT_TOOLTIP_SCROLL_STRATEGY_FACTORY, [i7.Overlay]), i0.ɵmpd(4608, i10.HAMMER_GESTURE_CONFIG, i11.GestureConfig, [[2, i11.MAT_HAMMER_OPTIONS], [2, i11.MatCommonModule]]), i0.ɵmpd(1073742336, i5.CommonModule, i5.CommonModule, []), i0.ɵmpd(1073742336, i12.DynamicComponentLoaderModule, i12.DynamicComponentLoaderModule, []), i0.ɵmpd(1073742336, i13.PlatformModule, i13.PlatformModule, []), i0.ɵmpd(1073742336, i6.ObserversModule, i6.ObserversModule, []), i0.ɵmpd(1073742336, i14.A11yModule, i14.A11yModule, []), i0.ɵmpd(1073742336, i8.BidiModule, i8.BidiModule, []), i0.ɵmpd(1073742336, i15.PortalModule, i15.PortalModule, []), i0.ɵmpd(1073742336, i16.ScrollingModule, i16.ScrollingModule, []), i0.ɵmpd(1073742336, i7.OverlayModule, i7.OverlayModule, []), i0.ɵmpd(1073742336, i11.MatCommonModule, i11.MatCommonModule, [[2, i11.MATERIAL_SANITY_CHECKS], [2, i10.HAMMER_LOADER]]), i0.ɵmpd(1073742336, i9.MatTooltipModule, i9.MatTooltipModule, []), i0.ɵmpd(1073742336, i11.MatRippleModule, i11.MatRippleModule, []), i0.ɵmpd(1073742336, i17.MatButtonToggleModule, i17.MatButtonToggleModule, []), i0.ɵmpd(1073742336, i18.MatIconModule, i18.MatIconModule, []), i0.ɵmpd(1073742336, i19.RouterModule, i19.RouterModule, [[2, i19.ɵangular_packages_router_router_a], [2, i19.Router]]), i0.ɵmpd(1073742336, i1.SubstanceSubunitsModule, i1.SubstanceSubunitsModule, []), i0.ɵmpd(1024, i19.ROUTES, function () { return [[]]; }, []), i0.ɵmpd(256, i20.DYNAMIC_COMPONENT, i21.SubstanceSubunitsComponent, [])]); });\nexport { SubstanceSubunitsModuleNgFactory as SubstanceSubunitsModuleNgFactory };\n"],"sourceRoot":"webpack:///"}